<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Snake â€” Fullscreen</title>
  <style>
    html,body {
      margin:0; padding:0; height:100%; width:100%;
      background:linear-gradient(180deg,#071025, #081424);
      font-family:Inter,system-ui,Segoe UI,Roboto,'Helvetica Neue',Arial;
      color:#e6eef6;
      overflow:hidden;
    }
    canvas {
      display:block;
      width:100vw;
      height:100vh;
      background:linear-gradient(180deg,#06101b,#061520);
    }
  </style>
</head>
<body>
  <canvas id="game"></canvas>

  <script>
  (function(){
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    const CELL = 20; // cell size in px
    let COLS, ROWS;

    let snake = [];
    let dir = {x:1,y:0};
    let nextDir = {x:1,y:0};
    let fruit = null;
    let score = 0;
    let running = false;
    let paused = false;
    let tickInterval = null;

    function resizeCanvas(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
      COLS = Math.floor(canvas.width / CELL);
      ROWS = Math.floor(canvas.height / CELL);
    }

    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    function randCell(){
      return { x: Math.floor(Math.random()*COLS), y: Math.floor(Math.random()*ROWS) };
    }

    function placeFruit(){
      let pos;
      const occupied = new Set(snake.map(s=>s.x+','+s.y));
      do {
        pos = randCell();
      } while (occupied.has(pos.x+','+pos.y));
      fruit = pos;
    }

    function reset(){
      snake = [];
      const start = { x: Math.floor(COLS/2), y: Math.floor(ROWS/2) };
      snake.push(start);
      dir = {x:1,y:0}; nextDir = {x:1,y:0};
      score = 0; running = true; paused = false;
      placeFruit();
      startLoop();
    }

    function gameOver(){
      running = false; stopLoop();
      alert("Game Over! Score: " + score);
      reset();
    }

    function startLoop(){
      stopLoop();
      const ms = 100; // fixed speed
      tickInterval = setInterval(tick, ms);
    }

    function stopLoop(){
      if(tickInterval){ clearInterval(tickInterval); tickInterval = null; }
    }

    function tick(){
      if(!running || paused) return;
      if(!isOpposite(nextDir, dir)) dir = {...nextDir};

      const head = snake[0];
      const newHead = { x: head.x + dir.x, y: head.y + dir.y };

      if(newHead.x < 0 || newHead.x >= COLS || newHead.y < 0 || newHead.y >= ROWS){
        return gameOver();
      }
      if(snake.some(seg => seg.x === newHead.x && seg.y === newHead.y)){
        return gameOver();
      }

      snake.unshift(newHead);

      if(fruit && newHead.x === fruit.x && newHead.y === fruit.y){
        score++;
        placeFruit();
      } else {
        snake.pop();
      }

      render();
    }

    function render(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      if(fruit){
        ctx.fillStyle = '#ef4444';
        ctx.fillRect(fruit.x*CELL, fruit.y*CELL, CELL, CELL);
      }

      for(let i=0;i<snake.length;i++){
        const s = snake[i];
        ctx.fillStyle = i===0 ? '#10b981' : '#34d399';
        ctx.fillRect(s.x*CELL, s.y*CELL, CELL-2, CELL-2);
      }

      ctx.fillStyle = "white";
      ctx.font = "16px monospace";
      ctx.fillText("Score: " + score, 10, 20);
    }

    function isOpposite(a,b){ return a.x === -b.x && a.y === -b.y; }

    window.addEventListener('keydown', e=>{
      const kd = { ArrowUp:{x:0,y:-1}, ArrowDown:{x:0,y:1}, ArrowLeft:{x:-1,y:0}, ArrowRight:{x:1,y:0} };
      if(kd[e.key]){
        const cand = kd[e.key];
        if(snake.length>1 && isOpposite(cand, dir)) return;
        nextDir = cand;
      }
      if(e.code === 'Space'){ paused = !paused; }
    });

    reset();
  })();
  </script>
</body>
</html>
